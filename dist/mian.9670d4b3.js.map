{"version":3,"sources":["mian.js"],"names":["canvas","document","getElementById","width","documentElement","clientWidth","height","clientHeight","ctx","getContext","fillStyle","strokeStyle","painting","paintDown","clearing","clearDown","last","lineWidth","lineCap","on","e","parentChildren","target","parentElement","children","i","length","classList","remove","add","id","toBlob","blob","saveAs","eventType","element","selector","fn","Element","querySelector","addEventListener","el","matches","parentNode","call","isTouchDevice","ontouchstart","x","touches","clientX","y","clientY","beginPath","arc","Math","PI","stroke","fill","clearRect","ontouchmove","drawLine","moveTo","lineTo","onmousedown","onmousemove","onmouseup","x1","y1","x2","y2","clear","onclick"],"mappings":"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","file":"mian.9670d4b3.js","sourceRoot":"..","sourcesContent":["let canvas = document.getElementById(\"canvas\");\r\ncanvas.width = document.documentElement.clientWidth\r\ncanvas.height = document.documentElement.clientHeight\r\nlet ctx = canvas.getContext(\"2d\");\r\nctx.fillStyle = \"black\";\r\nctx.strokeStyle = 'black';\r\nlet painting = true;\r\nlet paintDown = false;\r\nlet clearing = false;\r\nlet clearDown = false;\r\nlet last\r\nctx.lineWidth = 8\r\nctx.lineCap = 'round';\r\n\r\non('click', '.colors', 'li', (e) => {\r\n    let parentChildren = e.target.parentElement.children\r\n    for (let i = 0; i < parentChildren.length; i++) {\r\n        if (parentChildren[i] !== e.target) {\r\n            parentChildren[i].classList.remove(\"selected\")\r\n        }\r\n    }\r\n    e.target.classList.add(\"selected\")\r\n    //点击擦除时\r\n    if (e.target.id === \"clear\") {\r\n        clearing = true;\r\n        painting = false;\r\n        return\r\n    }\r\n    //点击下载图片时\r\n    if (e.target.id === \"download\") {\r\n        canvas.toBlob(function (blob) {\r\n            saveAs(blob, 'canvas')\r\n        });\r\n    }\r\n    painting = true;\r\n    clearing = false;\r\n    ctx.fillStyle = e.target.id;\r\n    ctx.strokeStyle = e.target.id;\r\n    ctx.lineWidth = 8;\r\n})\r\nfunction on(eventType, element, selector, fn) {\r\n    if (!(element instanceof Element)) {\r\n        element = document.querySelector(element)\r\n    }\r\n    element.addEventListener(eventType, e => {\r\n        let el = e.target\r\n        while (!el.matches(selector)) {\r\n            if (element === el) {\r\n                el = null\r\n                break\r\n            }\r\n            el = el.parentNode\r\n        }\r\n        el && fn.call(el, e, el)\r\n    })\r\n    return element\r\n}\r\n\r\nvar isTouchDevice = 'ontouchstart' in document.documentElement;\r\nif (isTouchDevice) {\r\n    canvas.ontouchstart = (e) => {\r\n        let x = e.touches[0].clientX\r\n        let y = e.touches[0].clientY\r\n        if (painting === true) {\r\n            ctx.beginPath();\r\n            ctx.arc(x, y, 1, 0, 2 * Math.PI);\r\n            ctx.stroke();\r\n            ctx.fill();\r\n            last = [x, y]\r\n        }\r\n        if (clearing === true) {\r\n            clearDown = true;\r\n            ctx.clearRect(x, y, 24, 24)\r\n        }\r\n    }\r\n    canvas.ontouchmove = (e) => {\r\n        let x = e.touches[0].clientX\r\n        let y = e.touches[0].clientY\r\n        if (painting === true) {\r\n            drawLine(last[0], last[1], x, y)\r\n            last = [x, y]\r\n        }\r\n        if (clearing === true) {\r\n            ctx.beginPath();\r\n            ctx.moveTo(last[0], last[1])\r\n            ctx.lineTo(x, y)\r\n            ctx.clearRect(x, y, 24, 24)\r\n        }\r\n    }\r\n} else {\r\n    canvas.onmousedown = (e) => {\r\n        if (painting === true) {\r\n            paintDown = true;\r\n            ctx.beginPath();\r\n            ctx.arc(e.clientX, e.clientY, 1, 0, 2 * Math.PI);\r\n            ctx.stroke();\r\n            ctx.fill();\r\n            last = [e.clientX, e.clientY]\r\n        }\r\n        //再擦除状态时\r\n        if (clearing === true) {\r\n            clearDown = true;\r\n            ctx.clearRect(e.clientX, e.clientY, 24, 24)\r\n        }\r\n    }\r\n    canvas.onmousemove = (e) => {\r\n        if (paintDown === true) {\r\n            drawLine(last[0], last[1], e.clientX, e.clientY)\r\n            last = [e.clientX, e.clientY]\r\n        }\r\n        if (clearDown === true) {\r\n            ctx.beginPath();\r\n            ctx.moveTo(last[0], last[1])\r\n            ctx.lineTo(e.clientX, e.clientX)\r\n            ctx.clearRect(e.clientX, e.clientY, 24, 24)\r\n        }\r\n    }\r\n    canvas.onmouseup = () => {\r\n        paintDown = false;\r\n        clearDown = false;\r\n    }\r\n}\r\nfunction drawLine(x1, y1, x2, y2,) {\r\n    ctx.beginPath();\r\n    ctx.moveTo(x1, y1)\r\n    ctx.lineTo(x2, y2)\r\n    ctx.stroke();\r\n}\r\nclear.onclick = () => {\r\n    clearing = true;\r\n    painting = false;\r\n}"]}