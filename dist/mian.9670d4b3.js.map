{"version":3,"sources":["mian.js"],"names":["canvas","document","getElementById","width","documentElement","clientWidth","height","clientHeight","ctx","getContext","fillStyle","strokeStyle","painting","last","lineWidth","lineCap","on","e","parentChildren","target","parentElement","children","i","length","classList","remove","add","id","toBlob","blob","saveAs","eventType","element","selector","fn","Element","querySelector","addEventListener","el","matches","parentNode","call","isTouchDevice","ontouchstart","x","touches","clientX","y","clientY","beginPath","arc","Math","PI","stroke","fill","ontouchmove","drawLine","onmousedown","onmousemove","onmouseup","x1","y1","x2","y2","moveTo","lineTo"],"mappings":"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","file":"mian.9670d4b3.js","sourceRoot":"..","sourcesContent":["let canvas = document.getElementById(\"canvas\");\r\ncanvas.width = document.documentElement.clientWidth\r\ncanvas.height = document.documentElement.clientHeight\r\nlet ctx = canvas.getContext(\"2d\");\r\nctx.fillStyle = \"black\";\r\nctx.strokeStyle = 'black';\r\nlet painting = false;\r\nlet last;\r\nctx.lineWidth = 8\r\nctx.lineCap = 'round';\r\n\r\non('click', '.colors', 'li', (e) => {\r\n    let parentChildren = e.target.parentElement.children\r\n    for (let i = 0; i < parentChildren.length; i++) {\r\n        if (parentChildren[i] !== e.target) {\r\n            parentChildren[i].classList.remove(\"selected\")\r\n        }\r\n    }\r\n    e.target.classList.add(\"selected\")\r\n    //点击擦除时\r\n    if (e.target.id === \"white\") {\r\n        ctx.fillStyle = \"white\"\r\n        ctx.strokeStyle = \"white\"\r\n        ctx.lineWidth = 24\r\n        return\r\n    }\r\n    //点击下载图片时\r\n    if (e.target.id === \"download\") {\r\n        canvas.toBlob(function (blob) {\r\n            saveAs(blob, 'canvas')\r\n        });\r\n        return\r\n    }\r\n    ctx.fillStyle = e.target.id;\r\n    ctx.strokeStyle = e.target.id;\r\n    ctx.lineWidth = 8;\r\n})\r\nfunction on(eventType, element, selector, fn) {\r\n    if (!(element instanceof Element)) {\r\n        element = document.querySelector(element)\r\n    }\r\n    element.addEventListener(eventType, e => {\r\n        let el = e.target\r\n        while (!el.matches(selector)) {\r\n            if (element === el) {\r\n                el = null\r\n                break\r\n            }\r\n            el = el.parentNode\r\n        }\r\n        el && fn.call(el, e, el)\r\n    })\r\n    return element\r\n}\r\n\r\nvar isTouchDevice = 'ontouchstart' in document.documentElement;\r\nif (isTouchDevice) {\r\n    canvas.ontouchstart = (e) => {\r\n        let x = e.touches[0].clientX\r\n        let y = e.touches[0].clientY\r\n        ctx.beginPath();\r\n        ctx.arc(x, y, 1, 0, 2 * Math.PI);\r\n        ctx.stroke();\r\n        ctx.fill();\r\n        last = [x, y]\r\n    }\r\n    canvas.ontouchmove = (e) => {\r\n        let x = e.touches[0].clientX\r\n        let y = e.touches[0].clientY\r\n        drawLine(last[0], last[1], x, y)\r\n        last = [x, y]\r\n    }\r\n} else {\r\n    canvas.onmousedown = (e) => {\r\n        painting = true;\r\n        ctx.beginPath();\r\n        ctx.arc(e.clientX, e.clientY, 1, 0, 2 * Math.PI);\r\n        ctx.stroke();\r\n        ctx.fill();\r\n        last = [e.clientX, e.clientY]\r\n    }\r\n    canvas.onmousemove = (e) => {\r\n        if (painting === true) {\r\n            drawLine(last[0], last[1], e.clientX, e.clientY)\r\n            last = [e.clientX, e.clientY]\r\n        }\r\n    }\r\n    canvas.onmouseup = () => {\r\n        painting = false;\r\n    }\r\n}\r\nfunction drawLine(x1, y1, x2, y2) {\r\n    ctx.beginPath();\r\n    ctx.moveTo(x1, y1)\r\n    ctx.lineTo(x2, y2)\r\n    ctx.stroke();\r\n}\r\n"]}